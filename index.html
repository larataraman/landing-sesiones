<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Reservar sesión</title>

  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      background: #f3efe8;
      color: #222;
    }
    .container {
      max-width: 720px;
      margin: 0 auto;
      padding: 32px 20px 64px;
    }
    h1, h2 {
      margin-bottom: 12px;
    }
    p {
      line-height: 1.5;
    }
    .card {
      background: #fff;
      border-radius: 8px;
      padding: 24px;
      margin-bottom: 24px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    }
    .btn {
      display: inline-block;
      background: #111;
      color: #fff;
      padding: 14px 20px;
      text-decoration: none;
      border-radius: 6px;
      margin-top: 16px;
    }
    .btn.secondary {
      background: #666;
    }
    .hidden {
      display: none;
    }
    label {
      display: block;
      margin-top: 12px;
    }
    select, input {
      width: 100%;
      padding: 10px;
      margin-top: 6px;
    }
  </style>
</head>

<body>
<div class="container">

  <!-- PASO 1 -->
  <div class="card" id="step1">
    <h1>Sesiones de acompañamiento</h1>

    <p>
      Espacios de orientación terapéutica para personas y familias atravesadas
      por situaciones de adicciones, dependencia emocional o problemáticas de salud mental.
      Trabajamos situaciones concretas, procesos personales y vínculos, con foco práctico
      para tomar decisiones más sanas.
    </p>

    <h2>Tipos de sesiones</h2>
    <p>
      <strong>Sesión individual</strong><br>
      Duración: 1 hora<br>
      Valor total: $55.000 – seña: $27.500
    </p>

    <p>
      <strong>Sesión grupal / familiar</strong><br>
      Duración: 1 hora y media<br>
      Valor total: $80.000 – seña: $40.000
    </p>

    <a class="btn" href="#" onclick="goToStep(2)">Elegir día y horario</a>
  </div>

  <!-- PASO 2 -->
  <div class="card hidden" id="step2">
    <h2>Elegir día y horario</h2>

    <label>Fecha</label>
    <input type="date" id="date" onchange="updateTimes()" />

    <label>Horario</label>
    <select id="time"></select>

    <a class="btn" href="#" onclick="goToStep(3)">Continuar</a>
    <a class="btn secondary" href="#" onclick="goToStep(1)">Volver</a>
  </div>

  <!-- PASO 3 -->
  <div class="card hidden" id="step3">
    <h2>Formulario previo</h2>
    <p>Completá este formulario antes de continuar con el pago.</p>

    <iframe
      id="googleForm"
      width="100%"
      height="700"
      frameborder="0"
      marginheight="0"
      marginwidth="0">
    </iframe>

    <a class="btn secondary" href="#" onclick="loadForm(); setPaymentLink(); goToStep(4)">
      Continuar
    </a>
  </div>

  <!-- PASO 4 -->
  <div class="card hidden" id="step4">
    <h2>Pago de seña</h2>
    <p>Para reservar el horario se abona la seña correspondiente.</p>

    <a
      class="btn"
      id="payButton"
      href="#"
      target="_blank">
      Pagar seña y reservar
    </a>
  </div>

</div>

<script>
  const timesByDay = {
    1: ['14:00', '15:00', '16:00'],
    2: ['11:00', '12:00', '14:00', '15:00', '16:00'],
    3: ['15:00', '16:00', '17:00', '18:00 (grupal)'],
    4: ['12:00', '14:00', '15:00'],
    5: ['12:00', '13:00', '14:00', '15:00', '18:00 (grupal)']
  };

  function updateTimes() {
    const date = document.getElementById('date').value;
    const timeSelect = document.getElementById('time');
    timeSelect.innerHTML = '';

    if (!date) return;

    const day = new Date(date + 'T00:00').getDay();
    if (!timesByDay[day]) {
      alert('Solo lunes a viernes');
      document.getElementById('date').value = '';
      return;
    }

    timesByDay[day].forEach(t => {
      const opt = document.createElement('option');
      opt.textContent = t;
      timeSelect.appendChild(opt);
    });
  }

  function loadForm() {
    const date = document.getElementById('date').value;
    const time = document.getElementById('time').value;

    const base =
      'https://docs.google.com/forms/d/e/1FAIpQLSc-oVgheFJldFczo4RC26a6S34ECyvgNGO0BVwZaMaqF1xAcA/viewform?usp=pp_url';

    const url =
      base +
      '&entry.304542391=' + encodeURIComponent(date) +
      '&entry.989379628=' + encodeURIComponent(time) +
      '&embedded=true';

    document.getElementById('googleForm').src = url;
  }

  function setPaymentLink() {
    const time = document.getElementById('time').value;
    const payBtn = document.getElementById('payButton');

    const linkIndividual = 'PEGAR_LINK_MP_27500';
    const linkGrupal = 'PEGAR_LINK_MP_40000';

    payBtn.href = time.includes('grupal')
      ? linkGrupal
      : linkIndividual;
  }

  function goToStep(step) {
    document.querySelectorAll('.card').forEach(c => c.classList.add('hidden'));
    document.getElementById('step' + step).classList.remove('hidden');
  }
</script>

</body>
</html>
